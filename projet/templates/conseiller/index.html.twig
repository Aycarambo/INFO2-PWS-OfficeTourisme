{% extends 'base.html.twig' %}

{% block title %}Mon espace{% endblock %}

{% block body %}
<style>
    .rdvLayout {
        border-radius: 10px;
        background-color: lightgrey;
        text-align: center;
        padding:2%;
    }
    a {
        text-decoration: none;
        font-weight: bold;
        color: black;
    }
    a:hover {
        color:grey;
        text-decoration: none;
    }
</style>
    <div class="container" align="center">
        <br><h2 style="padding-bottom: 5%;">Bonjour {{ conseiller.prenom }}</h2>
    </div>
    <div style="display:flex;">
        <div style="margin-left:1%; flex-basis:33%;flex-grow: 0;flex-shrink: 0;">
            <h2 style="margin: 1%;">{{ 'now'|date('d/m/Y - H:i', "Europe/Paris")}}</h2>
        </div>
        <div style="margin-left:1%; width: 100%;">
            <h2>Liens utiles</h2>
        </div>
    </div>

    <div style="display:flex;">
        <div style="margin-left:1%; flex-basis:33%;flex-grow: 0;flex-shrink: 0;">
            <table class="table rdvLayout">
                <tr>
                    <th style="background-color:grey;">
                        Rendez-vous du jour
                    </th>
                </tr>
                {% set rdvJour = [] %}
                {% for rdv in listeRDV %}
                    {% if 'now'|date('d/m/Y/H/i', "Europe/Paris") < rdv.horaire|date('d/m/Y/H/i')
                        and 'now'|date('d/m/Y', "Europe/Paris") == rdv.horaire|date('d/m/Y')%}
                        {% set rdvJour = rdvJour|merge([{ horaire: rdv.horaire|date('H:i'), nom: rdv.Touriste.nom, prenom: rdv.Touriste.prenom}]) %}
                    {% endif %}
                {% endfor %}

                {% for rdvTries in rdvJour|sort %}
                    <tr>
                        <th>
                            {{ rdvTries["horaire"] }} {{ rdvTries["nom"] }} {{ rdvTries["prenom"] }}
                        </th>
                    </tr>
                {% endfor %}
                <tr>
                    <th>
                        <a href="{{ path('conseillerRDV', { 'id': conseiller.id }) }}" class="btn btn-primary btn-lg active" role="button" aria-pressed="true">Voir plus</a>
                    </th>
                </tr>
            </table>
        </div>
        <div style="margin-left:1%;margin-right:1%;width: 100%;text-align: center;border: solid black;">
            <a href="https://www.iledere.com/">Accueil office de tourisme Île de Ré</a><br><br>
            <a href="https://www.tripadvisor.fr/Restaurants-g580156-Ile_de_Re_Charente_Maritime_Nouvelle_Aquitaine.html">Meilleurs restaurants Île de Ré</a><br><br>
            <a href="https://marine.meteoconsult.fr/meteo-marine/horaires-des-marees/ile-de-re-saint-martin-1026/mai-2021">Horaires des marées</a><br><br>
            <a href="https://generationvoyage.fr/visiter-ile-de-re-faire-voir/">Lieux à visiter</a>
        </div>
    </div>


{% endblock %}
